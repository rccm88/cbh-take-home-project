# Ticket Breakdown
We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**


Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".


You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

Ticket Breakdown:

# Ticket 1: Create a new custom ID field for the Agent table

A custom ID field needs to be added to the Agent table on the database. This new field will store custom Agent ID's generated by facilities.

Acceptance criteria:

- A new field named "custom_id" is added to the Agents table.
- The field will store a string of up to 20 characters.
- The field accepts a null value, because it is not mandatory for Facilities to create a new custom ID for the Agent.

Implementation details:

- Create the new field on the backend ORM. It will automatically generate a migration. 
- Test the migration.
- Check existing code blocks that interact with this table to check for adjustments. 
- Implement adjustments.

Time estimate: 3 hours.

# Ticket 2: Adjust the routes on the backend to deal with the new database field

The API routes on the back-end should be able to store and update the data including the new field.

Acceptance criteria:

- The API route for the POST request for the Agent object should include the new custom ID field.
- The API route for the PUT request for the Agent object should update the new custom ID field.
- Existing routes that depend on the Agent object should execute as they did before.

Implementation details:

- Test and make sure that after passing an Agent object in a POST request to the server, it stores the new custom ID value.
- Test and make sure that after passing an Agent object in a PUT request to the server, it updates the custom ID value.
- Check existing routes that are connected to the Agent object and make sure that their behavior continues as expected.

Time estimate: 4 hours.

# Ticket 3: Update the function getShiftsByFacility to include custom Agent IDs

The getShiftsByFacility function will be modified to include the custom ID for each Agent in the metadata returned.

Acceptance criteria:

- The function returns a list of Shift objects, each of them containing the new custom ID field for the Agent assigned to that shift.
- If a custom ID is null, the function should perform as it did previously, returning the internal database ID.

Implementation details:

- Modify the function's code to use the new Custom ID field if it is not null.
- Check for existing code blocks that interact with this function to check for adjustments. 
- Implement adjustments.

Time estimate: 1 hour and 30 minutes

# Ticket 4: Modify generateReport function to use the new custom Agent IDs

The generateReport function will be modified to use the new custom ID field for Agents in the generated PDF reports.

Acceptance criteria:

- If the custom ID exists, the generated report will display it.
- If the custom ID does not exist, the report will display the internal database as it previously did.
- The new changes shouldn't affect the overall layout of the report.

Implementation details:

- Modify the function's code to use the new custom ID field if it is not null.
- Check for existing code blocks that interact with this function to check for adjustments. 
- Implement adjustments.

Time estimate: 4 hours

# Ticket 5: Add the respective fields to the UI form for Facilities to define custom Agent IDs

New input fields will be added to the UI used by Facilities to manage Agents, allowing them to set custom IDs for each Agent.

Acceptance criteria:

- The new field will be added to the UI as an input used to create or edit an Agent record.
- The input field accepts a string of up to 20 characters.
- Implement validation on the new input to assure it meets the requirements for the field on the database.
- After the user submits the form, a call to the server is made with a POST or PUT request to save the data including the new field.

Implementation details:

- Add the new input field to the UI forms.
- Create validation for new the input and add it to the submit function of the forms.

Time estimate: 5 hours